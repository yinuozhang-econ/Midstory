------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/yinuozhang/Dropbox/Personal/Midstory/rust belt/stata/cleaning.log
  log type:  text
 opened on:  15 Jul 2022, 23:35:48

. cd "$work"
/Users/yinuozhang/Dropbox/Personal/Midstory/rust belt/stata

. use "$work/cleaning.dta", clear

. 
. desc

Contains data from /Users/yinuozhang/Dropbox/Personal/Midstory/rust belt/stata/cleaning.dta
  obs:     6,771,228                          
 vars:            16                          15 Jul 2022 22:23
 size:   406,273,680                          
------------------------------------------------------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
------------------------------------------------------------------------------------------------------------------------------
year            int     %8.0g      year_lbl   Census year
sample          long    %40.0g     sample_lbl
                                              IPUMS sample identifier
serial          double  %8.0f                 Household serial number
hhwt            double  %10.2f                Household weight
cluster         double  %13.0f                Household cluster for variance estimation
statefip        byte    %57.0g     statefip_lbl
                                              State (FIPS code)
strata          double  %12.0f                Household strata for variance estimation
gq              byte    %43.0g     gq_lbl     Group quarters status
pernum          int     %8.0g                 Person number in sample unit
perwt           double  %10.2f                Person weight
empstat         byte    %18.0g     empstat_lbl
                                              Employment status [general version]
empstatd        byte    %38.0g     empstatd_lbl
                                              Employment status [detailed version]
labforce        byte    %26.0g     labforce_lbl
                                              Labor force status
ind1990         int     %62.0g     ind1990_lbl
                                              Industry, 1990 basis
wkswork1        byte    %8.0g                 Weeks worked last year
incwage         long    %12.0g                Wage and salary income
------------------------------------------------------------------------------------------------------------------------------
Sorted by: 

. 
. *******************************************************************

. * Keep only private sector workers

. * From Alder etal 21

. *******************************************************************

. 
. *******************************************************************

. * identify manufacture workers

. *******************************************************************

. * Feryer etal: primary metals (33) and transportation (37), respec- tively. The bulk of the employment in these SICs falls w
> ithin the steel and auto industries, as seen by looking at the four-digit industries within SICs 33 and 37, which are summar
> ized in appendix A.

. * SIC 33: as late as 1993, 70 per- cent of total employment was within steel and iron foundries, steel rolling mills, and st
> eel and iron pipe factories.

. * SIC 37: the bulk of employment was directly in the production of cars, trucks, buses, and motor homes.

. *******************************************************************

. gen manu = 0

. replace manu = 1 if (ind1990 == 270) | (ind1990 == 271) | (ind1990 == 272) | (ind1990 == 280) | (ind1990 == 281) | (ind1990 
> == 282) | (ind1990 == 291) | (ind1990 == 292) | (ind1990 == 300) | (ind1990 == 301)  
(80,982 real changes made)

. 
. gen equip = 0

. replace equip = 1 if (ind1990 == 310) | (ind1990 == 311) | (ind1990 == 312) | (ind1990 == 320) | (ind1990 == 351) | (ind1990
>  == 361)  
(64,080 real changes made)

. 
. *******************************************************************

. * identify rustbelt region

. * Indiana, Illinois, Michigan, New York, Ohio, Wisconsin, Pennsylvania, and West Virginia

. * Definition coming from Alder etal 21

. *******************************************************************

. gen rb = 0

. replace rb = 1 if (statefip == 17 ) | (statefip == 18) | (statefip == 26) | (statefip == 36) | (statefip == 39) | (statefip 
> == 55) | (statefip == 42) | (statefip == 54) 
(2,220,274 real changes made)

. 
. * drop

. drop if (empstatd == 0) | (empstatd == 13) | (empstatd == 14) | (empstatd == 15) 
(1,858,353 observations deleted)

. gen empl = 0

. replace empl = 1 if empstat == 1
(2,702,004 real changes made)

. 
. 
. * collapse by perwt

. collapse (sum) perwt, by(year rb manu equip empstat)

. 
. log close
      name:  <unnamed>
       log:  /Users/yinuozhang/Dropbox/Personal/Midstory/rust belt/stata/cleaning.log
  log type:  text
 closed on:  15 Jul 2022, 23:36:01
------------------------------------------------------------------------------------------------------------------------------
